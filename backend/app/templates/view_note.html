{% extends 'layout.html' %}

{% block content %}
<h2>{{ note.title }}</h2>
<p>{{ note.content }}</p>

{% if note.summary %}
    <!-- Show existing summary -->
    <div class="summary-section">
        <h3>AI Summary</h3>
        <div class="summary-content">
            <pre style="white-space: pre-wrap; font-family: inherit;">{{ note.summary }}</pre>
        </div>
        
        <!-- Option to regenerate summary -->
        <form method="POST" action="{{ url_for('main.regenerate_summary', note_id=note.id) }}" style="display: inline;">
            <button type="submit" onclick="return confirm('Regenerate summary? This will replace the existing one.');">Regenerate Summary</button>
        </form>
    </div>
{% else %}
    <!-- Show summarize button if no summary exists -->
    <form method="POST" action="{{ url_for('main.summarize_note', note_id=note.id) }}">
        <button type="submit">Summarize</button>
    </form>
{% endif %}

<form method="POST" action="{{ url_for('main.delete_note', note_id=note.id) }}" onsubmit="return confirm('Delete this note?');">
        <button type="submit">Delete</button>
</form>

<p>
    <a href="{{ url_for('main.index') }}">Back to Notes</a> | 
    <a href="{{ url_for('main.upload_note') }}">Upload Another</a>
</p>
{% endblock %}
